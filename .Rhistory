move_dict <- unlist(move_list, recursive = FALSE)
timestamp_dict <- unlist(timestamp_list, recursive = FALSE)
return(list(moves = move_dict, timestamps = timestamp_dict))
}
# Example data
pgn_data <- c("1. e4 {[%clk 0:09:59.7]", "2. Nc3 {[%clk 0:09:56.3]", "3. Bb5+ {[%clk 0:09:51.5]",
"4. Nf3 {[%clk 0:09:32.7]", "5. d4 {[%clk 0:09:28.7]", "6. Ne5 {[%clk 0:09:15.9]",
"7. Nxb5 {[%clk 0:09:10.8]", "8. Kf1 {[%clk 0:08:44.9]", "9. c3 {[%clk 0:08:38.7]",
"10. Qh5 {[%clk 0:08:24.6]", "11. Qg5 {[%clk 0:08:07.7]", "12. h4 {[%clk 0:07:44.7]",
"13. dxe5 {[%clk 0:07:39.2]")
# Get the cleaned moves and timestamps
moves_and_timestamps <- separate_moves_and_timestamps(pgn_data)
# Print moves and timestamps
print(moves_and_timestamps$moves)
print(moves_and_timestamps$timestamps)
# Example data
pgn_data <- c("1. e4 {[%clk 0:09:59.7]", "2. Nc3 {[%clk 0:09:56.3]", "3. Bb5+ {[%clk 0:09:51.5]",
"4. Nf3 {[%clk 0:09:32.7]", "5. d4 {[%clk 0:09:28.7]", "6. Ne5 {[%clk 0:09:15.9]",
"7. Nxb5 {[%clk 0:09:10.8]", "8. Kf1 {[%clk 0:08:44.9]", "9. c3 {[%clk 0:08:38.7]",
"10. Qh5 {[%clk 0:08:24.6]", "11. Qg5 {[%clk 0:08:07.7]", "12. h4 {[%clk 0:07:44.7]",
"13. dxe5 {[%clk 0:07:39.2]")
# Get the cleaned moves and timestamps
moves_and_timestamps <- separate_moves_and_timestamps(pgn_data)
# Print moves and timestamps
print(moves_and_timestamps$moves)
print(moves_and_timestamps$timestamps)
stockfish_path <- "/Program Files (x86)/Tarrasch/Engines/stockfish_11_x64"
analyze_game(stockfish_path,moves_and_timestamps$moves)
# Function to separate moves and timestamps
separate_moves_and_timestamps <- function(data) {
# Initialize empty lists for moves and timestamps
moves <- c()
timestamps <- list()
# Loop through each entry in the data
for (entry in data) {
# Extract move
move <- sub("\\{\\[%clk\\s+([^\\}]+)\\]", "", sub("\\d+\\.\\s+([^{}]+)", "\\1", entry))
timestamp <- sub(".*\\{\\[%clk\\s+([^\\}]+)\\]", "\\1", entry)
# Append to lists
moves <- c(moves, move)
timestamps <- c(timestamps, timestamp)
}
# Concatenate moves into a single string
move_string <- paste(moves, collapse = " ")
# Convert timestamps to dictionary
timestamp_dict <- unlist(timestamps, recursive = FALSE)
return(list(moves = move_string, timestamps = timestamp_dict))
}
# Get the cleaned moves and timestamps
moves_and_timestamps <- separate_moves_and_timestamps(pgn_data)
# Print moves and timestamps
print(moves_and_timestamps$moves)
print(moves_and_timestamps$timestamps)
# Get the cleaned moves and timestamps
moves_and_timestamps <- separate_moves_and_timestamps(pgn_data)
# Print moves and timestamps
print(moves_and_timestamps$moves)
print(moves_and_timestamps$timestamps)
stockfish_path <- "/Program Files (x86)/Tarrasch/Engines/stockfish_11_x64"
analyze_game(stockfish_path,moves_and_timestamps$moves)
stockfish_path <- "/Program Files (x86)/Tarrasch/Engines/stockfish_11_x64"
Gtest<-analyze_game(stockfish_path,moves_and_timestamps$moves)
Gtest$score
Gtest[[10]]$score
for (move in Gtest){
print("hi")
}
for (move in Gtest){
count<-0
print(count)
count<-count+1
}
count<-0
for (move in Gtest){
print(count)
count<-count+1
}
count<-0
for (move in Gtest){
count<-count+1
print(move)
}
count<-0
for (move in Gtest){
count<-count+1
print(move$score)
}
print(moves_and_timestamps$moves)
pgn_data <- filtered_data$games$pgn[1]
pgn_data
# Sample PGN data
pgn_data <- filtered_data$games$pgn[1]
# Extract moves and timestamps
extract_moves_and_timestamps <- function(pgn) {
# Split the PGN data by newline
lines <- unlist(strsplit(pgn, "\n"))
# Find the line containing the moves (last line in this case)
moves_line <- lines[length(lines)]
# Extract move and timestamp using regex
matches <- regmatches(moves_line, gregexpr("\\d+\\.\\s+[^{}]+\\{\\[%clk\\s+[^\\}]+\\]", moves_line))
moves <- unlist(matches)
# Clean up the extracted moves and timestamps
moves_cleaned <- gsub("\\{\\[%clk\\s+([^\\}]+)\\]\\}", " \\1", moves)
return(moves_cleaned)
}
# Get the cleaned moves and timestamps
moves_and_timestamps <- extract_moves_and_timestamps(pgn_data)
print(moves_and_timestamps)
# Function to separate moves and timestamps
separate_moves_and_timestamps <- function(data) {
# Initialize empty lists for moves and timestamps
moves <- c()
timestamps <- list()
# Loop through each entry in the data
for (entry in data) {
# Extract move number and moves for white and black
move_num <- sub("\\. .*", "", entry)
move <- sub("\\{\\[%clk\\s+([^\\}]+)\\]", "", sub("\\d+\\.\\s+([^{}]+)", "\\1", entry))
timestamp <- sub(".*\\{\\[%clk\\s+([^\\}]+)\\]", "\\1", entry)
# Extract individual moves
move_parts <- unlist(strsplit(move, "\\s+"))
# Append moves to list
moves <- c(moves, move_parts)
timestamps <- c(timestamps, timestamp)
}
# Concatenate moves into a single string
move_string <- paste(moves, collapse = " ")
# Convert timestamps to dictionary
timestamp_dict <- unlist(timestamps, recursive = FALSE)
return(list(moves = move_string, timestamps = timestamp_dict))
}
# Get the cleaned moves and timestamps
moves_and_timestamps <- separate_moves_and_timestamps(pgn_data)
# Print moves and timestamps
print(moves_and_timestamps$moves)
print(moves_and_timestamps$timestamps)
library(chess)
library(bigchess)
# Analyze moves using Stockfish
stockfish_path <- "/Program Files (x86)/Tarrasch/Engines/stockfish_11_x64"
Gtest<-analyze_game(stockfish_path,moves_and_timestamps$moves)
print(moves_and_timestamps$moves)
extract_moves_and_timestamps <- function(pgn) {
# Split the PGN data by newline
lines <- unlist(strsplit(pgn, "\n"))
# Find the line containing the moves (last line in this case)
moves_line <- lines[length(lines)]
# Extract move and timestamp using regex
matches <- regmatches(moves_line, gregexpr("\\d+\\.\\s+[^{}]+\\{\\[%clk\\s+[^\\}]+\\]", moves_line))
moves <- unlist(matches)
# Clean up the extracted moves and timestamps
moves_cleaned <- gsub("\\{\\[%clk\\s+([^\\}]+)\\]\\}", " \\1", moves)
return(moves_cleaned)
}
moves_and_timestamps <- extract_moves_and_timestamps(pgn_data)
print(moves_and_timestamps)
pgn_data <- filtered_data$games$pgn[1]
# Extract moves and timestamps
extract_moves_and_timestamps <- function(pgn) {
# Split the PGN data by newline
lines <- unlist(strsplit(pgn, "\n"))
# Find the line containing the moves (last line in this case)
moves_line <- lines[length(lines)]
# Extract moves and timestamps using regex for both White and Black moves
matches <- regmatches(moves_line, gregexpr("\\d+\\.\\s+[^{}]+\\{\\[%clk\\s+[^\\}]+\\]|\\d+\\.\\.\\.\\s+[^{}]+\\{\\[%clk\\s+[^\\}]+\\]", moves_line))
moves <- unlist(matches)
# Clean up the extracted moves and timestamps
moves_cleaned <- gsub("\\{\\[%clk\\s+([^\\}]+)\\]\\}", " \\1", moves)
return(moves_cleaned)
}
# Get the cleaned moves and timestamps
moves_and_timestamps <- extract_moves_and_timestamps(pgn_data)
print(moves_and_timestamps)
# Function to separate moves and timestamps
separate_moves_and_timestamps <- function(data) {
# Initialize empty lists for moves and timestamps
moves <- c()
timestamps <- list()
# Loop through each entry in the data
for (entry in data) {
# Extract move
move <- sub("\\{\\[%clk\\s+([^\\}]+)\\]", "", sub("\\d+\\.\\s+([^{}]+)", "\\1", entry))
timestamp <- sub(".*\\{\\[%clk\\s+([^\\}]+)\\]", "\\1", entry)
# Append to lists
moves <- c(moves, move)
timestamps <- c(timestamps, timestamp)
}
# Concatenate moves into a single string
move_string <- paste(moves, collapse = " ")
# Convert timestamps to dictionary
timestamp_dict <- unlist(timestamps, recursive = FALSE)
return(list(moves = move_string, timestamps = timestamp_dict))
}
# Get the cleaned moves and timestamps
moves_and_timestamps <- separate_moves_and_timestamps(pgn_data)
# Print moves and timestamps
print(moves_and_timestamps$moves)
print(moves_and_timestamps$timestamps)
moves_and_timestamps <- separate_moves_and_timestamps(moves_and_timestamps)
# Print moves and timestamps
print(moves_and_timestamps$moves)
print(moves_and_timestamps$timestamps)
moves_and_timestamps
# Sample PGN data
pgn_data <- filtered_data$games$pgn[1]
# Extract moves and timestamps
extract_moves_and_timestamps <- function(pgn) {
# Split the PGN data by newline
lines <- unlist(strsplit(pgn, "\n"))
# Find the line containing the moves (last line in this case)
moves_line <- lines[length(lines)]
# Extract moves and timestamps using regex for both White and Black moves
matches <- regmatches(moves_line, gregexpr("\\d+\\.\\s+[^{}]+\\{\\[%clk\\s+[^\\}]+\\]|\\d+\\.\\.\\.\\s+[^{}]+\\{\\[%clk\\s+[^\\}]+\\]", moves_line))
moves <- unlist(matches)
# Clean up the extracted moves and timestamps
moves_cleaned <- gsub("\\{\\[%clk\\s+([^\\}]+)\\]\\}", " \\1", moves)
return(moves_cleaned)
}
# Get the cleaned moves and timestamps
moves_and_timestamps <- extract_moves_and_timestamps(pgn_data)
print(moves_and_timestamps)
# Get the cleaned moves and timestamps
temp <- separate_moves_and_timestamps(moves_and_timestamps)
# Print moves and timestamps
print(temp$moves)
print(temp$timestamps)
stockfish_path <- "/Program Files (x86)/Tarrasch/Engines/stockfish_11_x64"
Gtest<-analyze_game(stockfish_path,temp$moves)
# Sample PGN data
pgn_data <- filtered_data$games$pgn[1]
# Extract moves and timestamps
extract_moves_and_timestamps <- function(pgn) {
# Split the PGN data by newline
lines <- unlist(strsplit(pgn, "\n"))
# Find the line containing the moves (last line in this case)
moves_line <- lines[length(lines)]
# Extract moves and timestamps using regex for both White and Black moves
matches <- regmatches(moves_line, gregexpr("\\d+\\.\\s+[^{}]+\\{\\[%clk\\s+[^\\}]+\\]|\\d+\\.\\.\\.\\s+[^{}]+\\{\\[%clk\\s+[^\\}]+\\]", moves_line))
moves <- unlist(matches)
# Clean up the extracted moves and timestamps
moves_cleaned <- gsub("\\{\\[%clk\\s+([^\\}]+)\\]\\}", " \\1", moves)
return(moves_cleaned)
}
# Get the cleaned moves and timestamps
moves_and_timestamps <- extract_moves_and_timestamps(pgn_data)
print(moves_and_timestamps)
# Function to separate moves and timestamps
separate_moves_and_timestamps <- function(data) {
# Initialize empty lists for moves and timestamps
moves <- c()
timestamps <- list()
# Loop through each entry in the data
for (entry in data) {
# Extract move
if (grepl("^\\d+\\.\\s+", entry)) {
# White move format: number followed by dot and space
move <- sub("\\{\\[%clk\\s+([^\\}]+)\\]", "", sub("\\d+\\.\\s+([^{}]+)", "\\1", entry))
} else if (grepl("^\\d+\\.\\.\\.\\s+", entry)) {
# Black move format: number followed by three dots and space
move <- sub("\\{\\[%clk\\s+([^\\}]+)\\]", "", sub("\\d+\\.\\.\\.\\s+([^{}]+)", "\\1", entry))
} else {
next  # Skip entries that don't match move patterns (e.g., headers)
}
# Extract timestamp
timestamp <- sub(".*\\{\\[%clk\\s+([^\\}]+)\\]", "\\1", entry)
# Append to lists
moves <- c(moves, move)
timestamps <- c(timestamps, timestamp)
}
# Concatenate moves into a single string
move_string <- paste(moves, collapse = " ")
# Convert timestamps to a named list
timestamp_dict <- as.list(timestamps)
return(list(moves = move_string, timestamps = timestamp_dict))
}
# Get the cleaned moves and timestamps
temp <- separate_moves_and_timestamps(moves_and_timestamps)
# Print moves and timestamps
print(temp$moves)
print(temp$timestamps)
library(chess)
library(bigchess)
# Analyze moves using Stockfish
stockfish_path <- "/Program Files (x86)/Tarrasch/Engines/stockfish_11_x64"
Gtest<-analyze_game(stockfish_path,temp$moves)
count<-0
for (move in Gtest){
count<-count+1
print(move$sc)
}
for (move in Gtest){
print(move$curmove_lan)
print(move$score)
}
Gtest<-analyze_game(stockfish_path,temp$moves,depth=2)
count<-0
for (move in Gtest){
print(move$curmove_lan)
print(move$score)
}
stockfish_path <- "/Program Files (x86)/Tarrasch/Engines/stockfish_11_x64"
Gtest<-analyze_game(stockfish_path,temp$moves,depth=20)
count<-0
for (move in Gtest){
print(move$curmove_lan)
print(move$score)
}
for (move in Gtest){
print(move$curmove_lan)
print(move$score)
}
# Sample PGN data
pgn_data <- filtered_data$games$pgn[1]
pgn_data<-"1. f3 {[%clk 0:05:00]} e5 {[%clk 0:05:00]}
2. g4 {[%clk 0:04:55]} Qh4#"
# Extract moves and timestamps
extract_moves_and_timestamps <- function(pgn) {
# Split the PGN data by newline
lines <- unlist(strsplit(pgn, "\n"))
# Find the line containing the moves (last line in this case)
moves_line <- lines[length(lines)]
# Extract moves and timestamps using regex for both White and Black moves
matches <- regmatches(moves_line, gregexpr("\\d+\\.\\s+[^{}]+\\{\\[%clk\\s+[^\\}]+\\]|\\d+\\.\\.\\.\\s+[^{}]+\\{\\[%clk\\s+[^\\}]+\\]", moves_line))
moves <- unlist(matches)
# Clean up the extracted moves and timestamps
moves_cleaned <- gsub("\\{\\[%clk\\s+([^\\}]+)\\]\\}", " \\1", moves)
return(moves_cleaned)
}
# Get the cleaned moves and timestamps
moves_and_timestamps <- extract_moves_and_timestamps(pgn_data)
print(moves_and_timestamps)
# Function to separate moves and timestamps
separate_moves_and_timestamps <- function(data) {
# Initialize empty lists for moves and timestamps
moves <- c()
timestamps <- list()
# Loop through each entry in the data
for (entry in data) {
# Extract move
if (grepl("^\\d+\\.\\s+", entry)) {
# White move format: number followed by dot and space
move <- sub("\\{\\[%clk\\s+([^\\}]+)\\]", "", sub("\\d+\\.\\s+([^{}]+)", "\\1", entry))
} else if (grepl("^\\d+\\.\\.\\.\\s+", entry)) {
# Black move format: number followed by three dots and space
move <- sub("\\{\\[%clk\\s+([^\\}]+)\\]", "", sub("\\d+\\.\\.\\.\\s+([^{}]+)", "\\1", entry))
} else {
next  # Skip entries that don't match move patterns (e.g., headers)
}
# Extract timestamp
timestamp <- sub(".*\\{\\[%clk\\s+([^\\}]+)\\]", "\\1", entry)
# Append to lists
moves <- c(moves, move)
timestamps <- c(timestamps, timestamp)
}
# Concatenate moves into a single string
move_string <- paste(moves, collapse = " ")
# Convert timestamps to a named list
timestamp_dict <- as.list(timestamps)
return(list(moves = move_string, timestamps = timestamp_dict))
}
# Get the cleaned moves and timestamps
temp <- separate_moves_and_timestamps(moves_and_timestamps)
# Print moves and timestamps
print(temp$moves)
print(temp$timestamps)
library(chess)
library(bigchess)
# Analyze moves using Stockfish
stockfish_path <- "/Program Files (x86)/Tarrasch/Engines/stockfish_11_x64"
Gtest<-analyze_game(stockfish_path,temp$moves,depth=20)
count<-0
for (move in Gtest){
print(move$curmove_lan)
print(move$score)
}
# Sample PGN data
pgn_data <- filtered_data$games$pgn[1]
pgn_data<-"1. f3 {[%clk 0:05:00]} 1... e5 {[%clk 0:05:00]}
2. g4 {[%clk 0:04:55]} 2... Qh4#"
# Extract moves and timestamps
extract_moves_and_timestamps <- function(pgn) {
# Split the PGN data by newline
lines <- unlist(strsplit(pgn, "\n"))
# Find the line containing the moves (last line in this case)
moves_line <- lines[length(lines)]
# Extract moves and timestamps using regex for both White and Black moves
matches <- regmatches(moves_line, gregexpr("\\d+\\.\\s+[^{}]+\\{\\[%clk\\s+[^\\}]+\\]|\\d+\\.\\.\\.\\s+[^{}]+\\{\\[%clk\\s+[^\\}]+\\]", moves_line))
moves <- unlist(matches)
# Clean up the extracted moves and timestamps
moves_cleaned <- gsub("\\{\\[%clk\\s+([^\\}]+)\\]\\}", " \\1", moves)
return(moves_cleaned)
}
# Get the cleaned moves and timestamps
moves_and_timestamps <- extract_moves_and_timestamps(pgn_data)
print(moves_and_timestamps)
# Function to separate moves and timestamps
separate_moves_and_timestamps <- function(data) {
# Initialize empty lists for moves and timestamps
moves <- c()
timestamps <- list()
# Loop through each entry in the data
for (entry in data) {
# Extract move
if (grepl("^\\d+\\.\\s+", entry)) {
# White move format: number followed by dot and space
move <- sub("\\{\\[%clk\\s+([^\\}]+)\\]", "", sub("\\d+\\.\\s+([^{}]+)", "\\1", entry))
} else if (grepl("^\\d+\\.\\.\\.\\s+", entry)) {
# Black move format: number followed by three dots and space
move <- sub("\\{\\[%clk\\s+([^\\}]+)\\]", "", sub("\\d+\\.\\.\\.\\s+([^{}]+)", "\\1", entry))
} else {
next  # Skip entries that don't match move patterns (e.g., headers)
}
# Extract timestamp
timestamp <- sub(".*\\{\\[%clk\\s+([^\\}]+)\\]", "\\1", entry)
# Append to lists
moves <- c(moves, move)
timestamps <- c(timestamps, timestamp)
}
# Concatenate moves into a single string
move_string <- paste(moves, collapse = " ")
# Convert timestamps to a named list
timestamp_dict <- as.list(timestamps)
return(list(moves = move_string, timestamps = timestamp_dict))
}
# Get the cleaned moves and timestamps
temp <- separate_moves_and_timestamps(moves_and_timestamps)
# Print moves and timestamps
print(temp$moves)
print(temp$timestamps)
library(chess)
library(bigchess)
# Analyze moves using Stockfish
stockfish_path <- "/Program Files (x86)/Tarrasch/Engines/stockfish_11_x64"
Gtest<-analyze_game(stockfish_path,temp$moves,depth=20)
count<-0
for (move in Gtest){
print(move$curmove_lan)
print(move$score)
}
pgn_data <- filtered_data$games$pgn[1]
pgn_data
extract_moves_and_timestamps <- function(pgn) {
# Split the PGN data by newline
lines <- unlist(strsplit(pgn, "\n"))
# Find the line containing the moves (last line in this case)
moves_line <- lines[length(lines)]
# Extract moves and timestamps using regex for both White and Black moves
matches <- regmatches(moves_line, gregexpr("\\d+\\.\\s+[^{}]+\\{\\[%clk\\s+[^\\}]+\\]|\\d+\\.\\.\\.\\s+[^{}]+\\{\\[%clk\\s+[^\\}]+\\]", moves_line))
moves <- unlist(matches)
# Clean up the extracted moves and timestamps
moves_cleaned <- gsub("\\{\\[%clk\\s+([^\\}]+)\\]\\}", " \\1", moves)
return(moves_cleaned)
}
# Get the cleaned moves and timestamps
moves_and_timestamps <- extract_moves_and_timestamps(pgn_data)
print(moves_and_timestamps)
temp <- separate_moves_and_timestamps(moves_and_timestamps_scholars_mate)
moves_and_timestamps_scholars_mate <- c(
"1. e4 {[%clk 0:09:59.7]",
"1... e5 {[%clk 0:09:58.6]",
"2. Qh5 {[%clk 0:09:56.3]",
"2... Nc6 {[%clk 0:09:56.1]",
"3. Bc4 {[%clk 0:09:51.5]",
"3... Nf6 {[%clk 0:09:46.6]",
"4. Qxf7# {[%clk 0:09:32.7]"
)
# Get the cleaned moves and timestamps
temp <- separate_moves_and_timestamps(moves_and_timestamps_scholars_mate)
# Print moves and timestamps
print(temp$moves)
print(temp$timestamps)
stockfish_path <- "/Program Files (x86)/Tarrasch/Engines/stockfish_11_x64"
Gtest<-analyze_game(stockfish_path,temp$moves,depth=20)
count<-0
for (move in Gtest){
print(move$curmove_lan)
print(move$score)
}
for (move in Gtest){
print(move$score)
print(move$bestmove)
}
count<-0
for (move in Gtest){
print(move$score)
print(move$bestline_lan)
}
for (move in Gtest){
print(move$score)
print(move$comment)
}
count<-0
for (move in Gtest){
print(move$comment)
print(move$curmove_lan)
}
for (move in Gtest){
print(move$comment)
print(move$curmove_san)
}
for (move in Gtest){
print(move$comment)
print(move$curmove_san)
print(move$score)
}
for (move in Gtest){
print(move$curmove_san)
print(move$comment)
print(move$score)
}
analyze_position(stockfish_path,moves_and_timestamps_scholars_mate)
analyze_position(stockfish_path,temp$moves)
